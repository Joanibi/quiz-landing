<!doctype html>
<html lang="pt-br">
<head>
Â  <meta charset="utf-8">
Â  <title>Quiz Fitness</title>
Â  <style>
Â  Â  /* Fundo degradÃª */
Â  Â  body {
Â  Â  Â  margin: 0;
Â  Â  Â  font-family: 'Arial', sans-serif;
Â  Â  Â  background: linear-gradient(135deg, #4a00e0, #8e2de2);
Â  Â  Â  color: #fff;
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: center;
Â  Â  Â  align-items: center;
Â  Â  Â  min-height: 100vh;
Â  Â  }

Â  Â  .quiz-container {
Â  Â  Â  background: rgba(255,255,255,0.05);
Â  Â  Â  border-radius: 20px;
Â  Â  Â  padding: 30px 40px;
Â  Â  Â  width: 100%;
Â  Â  Â  max-width: 500px;
Â  Â  Â  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
Â  Â  }

Â  Â  h1 {
Â  Â  Â  text-align: center;
Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  font-size: 1.8rem;
Â  Â  Â  font-weight: 600;
Â  Â  }

Â  Â  .progress {
Â  Â  Â  height: 6px;
Â  Â  Â  width: 100%;
Â  Â  Â  background: rgba(255,255,255,0.2);
Â  Â  Â  border-radius: 3px;
Â  Â  Â  margin-bottom: 30px;
Â  Â  Â  overflow: hidden;
Â  Â  }

Â  Â  .progress-bar {
Â  Â  Â  height: 100%;
Â  Â  Â  width: 0%; /* Inicia em 0% */
Â  Â  Â  background: #6c63ff;
Â  Â  Â  border-radius: 3px;
Â  Â  Â  transition: width 0.3s;
Â  Â  }

Â  Â  .pergunta {
Â  Â  Â  margin-bottom: 25px;
Â  Â  Â  transition: opacity 0.3s; /* Adiciona transiÃ§Ã£o para suavizar o desaparecimento */
Â  Â  }

Â  Â  .pergunta p {
Â  Â  Â  font-size: 1.1rem;
Â  Â  Â  margin-bottom: 15px;
Â  Â  }

Â  Â  .pergunta button {
Â  Â  Â  display: block;
Â  Â  Â  width: 100%;
Â  Â  Â  background: rgba(255,255,255,0.1);
Â  Â  Â  border: none;
Â  Â  Â  color: #fff;
Â  Â  Â  padding: 12px 20px;
Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  border-radius: 12px;
Â  Â  Â  font-size: 1rem;
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: background 0.3s, transform 0.2s;
Â  Â  Â  text-align: left;
Â  Â  }

Â  Â  .pergunta button:hover {
Â  Â  Â  background: rgba(255,255,255,0.2);
Â  Â  Â  transform: translateY(-2px);
Â  Â  }

Â  Â  .pergunta button:active {
Â  Â  Â  transform: translateY(0);
Â  Â  Â  background: rgba(255,255,255,0.3);
Â  Â  }

    /* CLASSE ESSENCIAL PARA ESCONDER */
    .oculta {
        display: none !important;
    }

Â  Â  .footer-text {
Â  Â  Â  text-align: center;
Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  color: rgba(255,255,255,0.7);
Â  Â  Â  margin-top: 10px;
Â  Â  }
Â  </style>
</head>
<body>
Â  <div class="quiz-container">
Â  Â  <h1>Descubra seu estilo fitness!</h1>

Â  Â  <div class="progress">
Â  Â  Â  <div id="progress-bar" class="progress-bar"></div>
Â  Â  </div>

    Â  Â  <div id="p1" class="pergunta" data-pergunta="Qual seu objetivo principal?">
Â  Â  Â  <p>Qual seu objetivo principal?</p>
Â  Â  Â  <button onclick="responder(this)" data-resposta="Ganhar massa" data-next="p2">ğŸ’ª Ganhar massa</button>
Â  Â  Â  <button onclick="responder(this)" data-resposta="Perder peso" data-next="p2">âš¡ Perder peso</button>
Â  Â  Â  <button onclick="responder(this)" data-resposta="DefiniÃ§Ã£o" data-next="p2">ğŸ‹ï¸ DefiniÃ§Ã£o</button>
Â  Â  </div>

    Â  Â  <div id="p2" class="pergunta oculta" data-pergunta="Com que frequÃªncia treina?">
Â  Â  Â  <p>Com que frequÃªncia treina?</p>
Â  Â  Â  <button onclick="responder(this)" data-resposta="1-2x por semana" data-next="p3">1-2x por semana</button>
Â  Â  Â  <button onclick="responder(this)" data-resposta="3-4x por semana" data-next="p3">3-4x por semana</button>
Â  Â  Â  <button onclick="responder(this)" data-resposta="5x ou mais" data-next="p3">5x ou mais</button>
Â  Â  </div>

    Â  Â  <div id="p3" class="pergunta oculta" data-pergunta="Qual seu tipo de treino preferido?">
Â  Â  Â  <p>Qual seu tipo de treino preferido?</p>
Â  Â  Â  <button onclick="responder(this)" data-resposta="MusculaÃ§Ã£o" data-next="finalizar">MusculaÃ§Ã£o</button>
Â  Â  Â  <button onclick="responder(this)" data-resposta="Cardio/Corrida" data-next="finalizar">Cardio/Corrida</button>
Â  Â  Â  <button onclick="responder(this)" data-resposta="Funcional/Cross" data-next="finalizar">Funcional/Cross</button>
Â  Â  </div>
    
    <div id="loading" class="pergunta oculta">
        <p style="text-align: center;">ğŸ‰ Finalizando seu quiz e preparando seu resultado...</p>
    </div>

Â  Â  <div class="footer-text">
Â  Â  Â  Responda com honestidade para obter o melhor resultado
Â  Â  </div>
Â  </div>

  <script>
    // *** CONFIGURAÃ‡Ã•ES ***
    // 1. SUBSTITUA PELO SEU URL DE IMPLANTAÃ‡ÃƒO DO GOOGLE APPS SCRIPT
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzL56xXNuf1S-9GeV1Dn_7WPMTC1HYaIQKhbrisNToSc8N7X5xmpbeknmCUxHhEG05uvw/exec";
    // 2. A constante REDIRECT_URL nÃ£o Ã© mais necessÃ¡ria!

    // ReferÃªncias aos elementos do DOM
    const perguntasDivs = document.querySelectorAll('.pergunta:not(#loading)');
    const progressBar = document.getElementById('progress-bar');
    const progressContainer = document.querySelector('.progress');
    const loadingDiv = document.getElementById('loading');
    
    const totalPerguntas = perguntasDivs.length;
    let perguntasRespondidas = 0;

    // Inicializa a barra de progresso (0%)
    progressBar.style.width = '0%';

    /**
     * Envia os dados para a planilha em segundo plano.
     */
    function enviarDadosEmSegundoPlano(pergunta, resposta) {
        const formData = new FormData();
        formData.append("pergunta", pergunta);
        // Limpa o texto da resposta (remove emojis e espaÃ§os extras)
        formData.append("resposta", resposta.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]|\s/g, '').trim()); 
        formData.append("origem", window.location.href);

        fetch(SCRIPT_URL, {
            method: "POST",
            body: formData 
        })
        .then(response => response.json())
        .then(data => {
            if (data.status !== 'sucesso') {
                console.warn(`[Apps Script Erro] Resposta falhou ao salvar: ${pergunta} -> ${data.mensagem}`);
            } else {
                console.log(`[Apps Script Sucesso] Resposta salva: ${pergunta}`);
            }
        })
        .catch(err => {
            console.error(`[ERRO GRAVE] Falha no envio para a planilha: ${pergunta}`, err);
        });
    }

    /**
     * FunÃ§Ã£o chamada ao clicar em um botÃ£o de resposta.
     */
    function responder(botao) {
        const perguntaDiv = botao.closest('.pergunta');
        const perguntaTexto = perguntaDiv.getAttribute("data-pergunta");
        const respostaTexto = botao.innerText;
        const proximaId = botao.getAttribute("data-next"); 

        // 1. INICIA O ENVIO DE DADOS (em segundo plano)
        enviarDadosEmSegundoPlano(perguntaTexto, respostaTexto);

        // 2. LÃ“GICA DE PROGRESSO
        perguntasRespondidas++;
        const progressoPercentual = (perguntasRespondidas / totalPerguntas) * 100;
        progressBar.style.width = progressoPercentual + '%';

        // 3. LÃ“GICA DE TRANSIÃ‡ÃƒO INSTANTÃ‚NEA
        
        // Esconde a pergunta atual imediatamente
        perguntaDiv.classList.add('oculta'); 

        if (proximaId === 'finalizar') {
            // LÃ“GICA DE FINALIZAÃ‡ÃƒO (Sem Redirecionamento)
            
            // 3.1 Oculta a barra de progresso e o footer
            progressContainer.classList.add('oculta');
            document.querySelector('.footer-text').classList.add('oculta');

            // 3.2 Mostra a mensagem final
            loadingDiv.classList.remove('oculta');
            
        } else {
            // Se houver prÃ³xima pergunta, mostra a prÃ³xima
            const proximaDiv = document.getElementById(proximaId);
            if (proximaDiv) {
                proximaDiv.classList.remove('oculta');
            } else {
                // Caso o data-next esteja configurado incorretamente
                console.error(`Erro na sequÃªncia: PrÃ³ximo ID '${proximaId}' nÃ£o encontrado.`);
                loadingDiv.innerText = "Erro ao carregar a prÃ³xima pergunta. O quiz foi finalizado.";
                loadingDiv.classList.remove('oculta');
            }
        }
    }
</script>
</body>
</html>










